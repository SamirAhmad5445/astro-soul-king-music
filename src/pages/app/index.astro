---
import Layout from "@layouts/Layout.astro";
---

<Layout title="Welcome to App." />

<script>
  async function refreshToken() {
    const response = await fetch("https://localhost:7066/api/user/refresh", {
      method: "PUT",
      headers: {
        "Content-Type": "application/json",
      },
      credentials: "include",
    });

    if (!response.ok) {
      const error = await response.text();
      console.error(error);
      return;
    }

    const token = await response.text();
    localStorage.setItem("token", token);
    console.log("refresh");
  }

  setInterval(refreshToken, 50000);
</script>
